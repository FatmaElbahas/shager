<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ù…ÙŠØ³Ø±</title>
</head>

<body>
    <h1>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯ÙØ¹</h1>
    <button id="payBtn">ğŸ’³ Ø§Ø¯ÙØ¹ Ø§Ù„Ø¢Ù†</button>

    <script>
        const API_BASE = "https://mediumblue-seahorse-369825.hostingersite.com"; // Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø§Ùƒ Ø¥Ù†Ø¯ Laravel

        document.getElementById('payBtn').addEventListener('click', async () => {
            try {
                const res = await fetch(`${API_BASE}/create-payment`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        // Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ JWT Token Ø£Ùˆ Auth Ù„Ø§Ø²Ù… ØªØ¶ÙŠÙÙ‡ Ù‡Ù†Ø§
                        // "Authorization": `Bearer ${token}`
                    }
                });

                const data = await res.json();
                console.log("Response:", data);

                if (data.source && data.source.transaction_url) {
                    // Ù„Ùˆ ÙÙŠÙ‡ transaction URL Ù…Ù† Ù…ÙŠØ³Ø±
                    window.location.href = data.source.transaction_url;
                } else if (data.url) {
                    // Ø±Ø§Ø¨Ø· Ø¯ÙØ¹ Ù…Ø¨Ø§Ø´Ø±
                    window.location.href = data.url;
                } else {
                    alert("âŒ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙØ¹");
                }
            } catch (err) {
                console.error(err);
                alert("âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
            }
        });
    </script>
</body>

</html>